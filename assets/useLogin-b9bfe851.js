import{bi as r,r as a,u as m,v as d,bg as h,E as i}from"./index-85ab92a3.js";function v(){return{login:t=>r.post("/login",t),register:t=>r.post("/register",t),forgetPassword:t=>r.post("/forgot-password",t)}}const A=v();function w(){const[t,o]=a.useState(!1),e=m(),u=d(),{isAuthenticated:c,saveSession:g}=h(),n=a.useMemo(()=>e.state&&e.state.from?e.state.from.pathname:"/",[e.state]);return{loading:t,login:async(l,{email:f,password:p})=>{l.preventDefault(),o(!0);try{const s=await A.login({email:f,password:p});o(!1),i.success("Login successful!"),setTimeout(()=>{s.token&&(g({...s.user??{},token:s.token}),u(n))},1500)}catch{o(!1),i.error("Adresse email incorrecte ou mot de passe!")}},redirectUrl:n,isAuthenticated:c}}export{w as u};
