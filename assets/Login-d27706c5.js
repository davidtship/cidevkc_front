import{r as o,v as f,j as e,F as t,h as j,L as g,B as k}from"./index-85ab92a3.js";import{A as w}from"./AuthLayout-e377b30d.js";import{T as b}from"./TitleHelmet-9d267878.js";import{A as y}from"./AuthMinmal-91131a13.js";import"./Helmet-b036da4a.js";const M=()=>{o.useState(!1);const[c,n]=o.useState(!1),[l,N]=o.useState(null),m=f();async function d(i){i.preventDefault();const a=new FormData(i.target);if(a.get("username")!=""&&a.get("password")!=""){const v={email:a.get("username"),password:a.get("password")},s=await(await fetch("http://localhost:8000/auth/jwt/create/",{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json "}})).json();if(console.log(s),s.email==a.get("username")){var r=s.access,p=s.image,u=s.first_name,h=s.last_name,x=s.id;document.cookie="access="+r+"; path=/",document.cookie="profilpicpath="+p+"; path=/",document.cookie="firstname="+u+"; path=/",document.cookie="lastname="+h+"; path=/",document.cookie="id="+x+"; path=/",alert("Connexion reussi !!"),m("/")}else s.detail=="No active account found with the given credentials"?alert("Votre compte a ete desactiver vous ne pouver pas vous connecter"):s.error=="21"?alert("Vous ne pouvez pas vous connecter avec cet equipement"):alert("Mot de passe ou utilisateur incorrectes !!");var r=s.access;s.refresh,document.cookie="access="+r+"; path=/"}else alert("Veuillez remplir tout les champs!!!")}return e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Login"}),e.jsx(w,{children:e.jsxs(y,{children:[e.jsxs("div",{className:"",children:[e.jsx("h4",{className:"fw-bold ",children:"Connectez-vous à votre compte"}),e.jsx("p",{className:"",children:"Entrez vos coordonnées pour vous connecter à votre compte."})]}),e.jsxs(t,{onSubmit:d,children:[e.jsxs(t.Group,{className:"",children:[e.jsx(t.Control,{type:"text",placeholder:"Email",required:!0,name:"username",id:"username"}),e.jsx(t.Control.Feedback,{type:"invalid",children:l})]}),e.jsx(t.Group,{className:"mb-3 position-relative",children:e.jsx(t.Control,{type:"password",name:"password",id:"password",placeholder:"Password",required:!0})}),e.jsxs(j,{direction:"horizontal",children:[e.jsxs(t.Check,{type:"checkbox",id:"check-api-checkbox",children:[e.jsx(t.Check.Input,{type:"checkbox",checked:c,onChange:()=>n(!c)}),e.jsx(t.Check.Label,{children:"Se souvenir"})]}),e.jsx(g,{to:"/auth/minimal/forgot-password",className:"link-primary ms-auto",children:"Mot de passe oublié?"})]}),e.jsx("div",{className:"d-grid gap-2 my-4",children:e.jsx(k,{type:"submit",variant:"primary",className:"text-white",children:"Se connecter"})}),e.jsx("div",{className:"d-grid flex-wrap d-sm-flex gap-2"})]})]})})]})};export{M as default};
